import{writable,get}from"svelte/store";import{config}from"../stores/config.js";var history={histStore:[],addHistory:function(t){var o=this.histStore.find(o=>o.toLowerCase().includes(t.toLowerCase()));null==o&&(this.histStore.push(t),this.saveHistory())},searchHistory:function(t){return this.histStore.filter(o=>o.toLowerCase().includes(t.toLowerCase()))},saveHistory:function(){const t=get(config);""!==t.configDir&&null!==t.localFS&&t.localFS.writeFile(t.localFS.appendPath(t.configDir,"history.json"),JSON.stringify(this.histStore))},loadHistory:function(){const t=get(config),o=t.localFS.appendPath(t.configDir,"history.json");if(""!==t.configDir&&null!==t.localFS&&t.localFS.fileExists(o))try{this.histStore=JSON.parse(t.localFS.readFile(t.localFS.appendPath(t.configDir,"history.json")))}catch(t){this.histStore=[]}}};export const dirHistory=writable(history);